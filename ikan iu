DELIMITER $$

CREATE PROCEDURE getMemberTier(
    IN p_id_anggota INT,
    OUT p_tier VARCHAR(20)
)
BEGIN
    DECLARE v_total INT;

    SELECT total_pinjaman INTO v_total
    FROM anggota
    WHERE id_anggota = p_id_anggota;

    IF v_total < 5 THEN
        SET p_tier = 'Bronze';
    ELSEIF v_total BETWEEN 5 AND 10 THEN
        SET p_tier = 'Silver';
    ELSE
        SET p_tier = 'Gold';
    END IF;
END $$

DELIMITER ;
